<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:customize="http://www.coremedia.com/2007/coremedia-spring-beans-customization"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.coremedia.com/2007/coremedia-spring-beans-customization
                           http://www.coremedia.com/2007/coremedia-spring-beans-customization.xsd">

    <customize:append id="byCaeFeederBeanPropertiesByClassCustomizer" bean="caeFeederBeanPropertiesByClass">
        <description>
            Mapping from bean classes to comma-separated list of indexed properties.
            When populating a Feedable for a bean of one of the given classes, the given bean properties are mapped to
            Feedable elements with the same names. The content of the given properties is also indexed in field 'textbody'.
            For a more flexible mapping of bean properties to feedable elements, you can configure BeanFeedableMappings in
            list 'caeFeederBeanMappings', which are merged with the configuration from this map.
            Beans and their properties are only indexed if the corresponding content type is configured for feeding
            See properties 'feeder.contentSelector.contentTypes' and 'feeder.contentSelector.includeSubTypes'.
        </description>
        <map>
            <entry key="com.coremedia.blueprint.common.contentbeans.CMArticle" value="productDesc"/>
        </map>
    </customize:append>

    <!-- Index the productCode property of CMProducts into a separate index field -->
    <bean id="byRelatedFeedableMapping" class="com.coremedia.cap.feeder.bean.BeanFeedableMapping">
        <property name="beanClass" value="com.coremedia.blueprint.common.contentbeans.CMTeasable"/>
        <property name="beanPropertyMappings">
            <list>
                <bean class="com.coremedia.cap.feeder.bean.BeanPropertyFeedableElementMapping">
                    <property name="beanProperty" value="related"/>
                    <property name="propertyConverter">
                        <bean class="com.boots.cms.by.caefeeder.RelatedPropertyConverter"/>
                    </property>
                    <property name="feedableElement" value="related"/>
                    <property name="textBody" value="true"/>
                </bean>
            </list>
        </property>
    </bean>

    <customize:append id="addByRelatedBeanFeedableMapping" bean="caeFeederBeanMappings">
        <list>
            <ref bean="byRelatedFeedableMapping"/>
        </list>
    </customize:append>


</beans>

