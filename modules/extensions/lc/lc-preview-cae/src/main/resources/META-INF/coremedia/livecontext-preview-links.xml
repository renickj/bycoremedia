<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:customize="http://www.coremedia.com/2007/coremedia-spring-beans-customization"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
               http://www.coremedia.com/2007/coremedia-spring-beans-customization http://www.coremedia.com/2007/coremedia-spring-beans-customization.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

  <import resource="classpath:/META-INF/coremedia/livecontext-handler-interceptors.xml"/>
  <import resource="classpath:/framework/spring/livecontext-services.xml"/>
  <import resource="classpath:/com/coremedia/cae/link-services.xml"/>

  <context:component-scan base-package="com.coremedia.livecontext.preview"/>

  <customize:replace id="previewDateLinkTransformerCustomizerLc" bean="previewDateAppendingLinkTransformer">
    <bean class="com.coremedia.livecontext.preview.PreviewDateAppendingLinkTransformer"/>
  </customize:replace>

  <customize:append id="workspaceParameterAddingLinkTransformerCustomizer" bean="linkTransformers">
    <list>
      <bean class="com.coremedia.livecontext.handler.WorkspaceIdAppendingLinkTransformer">
        <description>
          Creates a CAE LinkTransformer that rewrites all generated links
          and adds the request parameter for a given ibm wcs workspace id.
        </description>
      </bean>
      <bean class="com.coremedia.livecontext.preview.PreviewTokenAppendingLinkTransformer">
        <description>
          Creates a CAE LinkTransformer that rewrites all generated links
          and adds the request parameter for a given ibm wcs preview token id.
        </description>
        <property name="previewTokenProvider" ref="previewTokenProvider"/>
      </bean>
    </list>
  </customize:append>
</beans>
